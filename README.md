# social_network_system_design
Развиваемся по курсу [System Design](https://balun.courses/courses/system_design). Проектируем свою социальную сеть для путешественников.

---

# Функциональные требования
- публикация поста с возможностью добавлять описание, прикреплять изображения и геолокацию
- возможность поставить "нравится" посту, а также снять эту отметку обратно
- добавление комментария под постом, а также удаление своих комментариев
- просмотр комментариев других пользователей. поддержка комментирования комментариев, а также лайков комментариев, не нужна.
- подписка на аккаунты других пользователей
- поиск постов по геолокации (с возможностью искать отдельно по стране или городу) и упорядоченный вывод по популярности (от постов с наибольшим количеством лайков к меньшим) по выбранной геолокации
- поддержка личных чатов между пользователями без отправки медиа-файлов
- отображение ленты с постами с аккаунтов, на которые подписан пользователь
- система аутентификации по номеру телефона с проверкой кода по смс
- отображение и редактирование профиля пользователя
- кросс-платформенная поддержка: веб и мобильное приложение
- GR (Govement Relations) 

# Нефункциональные требования
- DAU 10.000.000
- запускаем только в СНГ (поддержка только русского языка)
- шифрование переписок
- сезонность есть: будет пик в летние месяцы, праздники, новый год. люди будут больше делать постов о своих поездках.
- храним данные всегда
- соблюдаем доступность на уровне 99,99%
- время ответа - не больше 3 секунд
- в разрезе пользователя возьмём усреднённо:
  - публикация поста - 1 rpd, latency = 10 секунд
  - оценка и комментарии постов - 10 rpd, latency = 300 ms
  - новая подписка - 1 rpd, latency = 300 ms
  - поиск популярных мест - 10 rpd, latency = 3 секунды
  - общение в личке - 20 rpd, latency = 300 ms
  - просмотр ленты - 100 rpd, latency = 3 секунд
- ограничения по публикации поста:
  - максимальный размер загружаемого изображения - 3 МБ
  - максимальное количество фотографий в посте - 10
  - максимальный размер текста - 2000 символов
- ограничения по комментариям:
  - максимальное количество символов - 2000
- подписки:
  - максимальное количество подписок - 10000
- лента:
  - посты отдаются с пагинацией (бесконечная прокрутка)
- личные сообщения:
  - максимальное количество символов в сообщении - 2000

# Расчёт нагрузки

## RPS
//TODO: посчитать отдельный рпс и траффик
10.000.000 DAU * 142 rpd / 86400 sec per day =  16435 rps

## Traffic

По большей части траффик создаёт загрузка/просмотр фотографий в постах. Само текстовое сообщение будет занимать не более 4 КБ, а фотографии чаще всего весят до 1МБ в среднем. Фотографий за раз также в среднем выкладывают немного - 3 штуки.
Так как я представляю соцсеть наподобие инстаграмма, где упор идёт на фотографии (визуальную составляющую), а текст вторичен, то берём в среднем по палате, что 3МБ на запрос (с учётом, что кто-то грузит намного больше, а кто-то намного меньше).

rps * avg_req_size = 16435 * 3 МБ = 50GB в секунду

## Connections

Берём 10% от пользователей: 100.000 активных соединений.
